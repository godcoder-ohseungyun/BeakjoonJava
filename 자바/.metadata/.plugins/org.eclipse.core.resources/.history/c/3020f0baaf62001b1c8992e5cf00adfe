package Baekjoon_DFS_BFS;
/*
public class Main3_2 {

	public static void main(String[] args) {
		// TODO Auto-generated method stub

	}

}
*/

import java.util.*;
public class Main1_1 {

	static boolean[] visit;
	static int[][] arr;
	static int N,M,V;
	public static void main(String[] args) {
		Scanner scan=new Scanner(System.in);
		N=scan.nextInt();
		M=scan.nextInt();
		V=scan.nextInt();
		arr=new int[N+1][N+1];
		visit=new boolean[N+1];
		for(int i=0;i<M;i++)
		{
			int num1=scan.nextInt(); // next+type(): " "와"enter" 를 구분자로 입력받음  / nextLine(): "enter"를 구분자로 받고 문자열을 받음(공백가능) / next(): " "와 "enter"를 구분자로 받고 문자열을 받음
			int num2=scan.nextInt();
			arr[num1][num2]=arr[num2][num1]=1; //대칭구조 making 무방향 그래프 !!!!!!!!!!!!
		}
		dfs(V);
		reset();
		bfs(V);
	}
	
	public static void dfs(int i)
	{
		visit[i]=true;
		System.out.print(i+" ");
		for(int j=1;j<=N;j++)
		{
			if(arr[i][j]==1&&!visit[j])
			{
				dfs(j);
			}
		}
	}
	public static void reset()
	{
		for(int i=0;i<visit.length;i++)visit[i]=false;
		System.out.println();
	}
	
	public static void bfs(int i)
	{
		Queue<Integer> q=new LinkedList<>();
		q.add(i);
		visit[i]=true;
		while(!q.isEmpty())
		{
			i=q.poll();
			System.out.print(i+" ");
			for(int j=1;j<=N;j++)   //자유자재로 간선을 이동해야함으로 i+1부터 시작하면 X(파악할때만 사용)
			{
				if(arr[i][j]==1&&!visit[j])
				{
					q.add(j);
					visit[j]=true;
				}
			}
		}
	}
}